var GFPipeSettings=function(){var n=this,e=jQuery;n.init=function(){n.$elem={settingsFields:{width:e("#piperecorder_width"),height:e("#piperecorder_height"),recording_time:e("#piperecorder_recording_time"),bottom_menu:e("#piperecorder_bottom_menu"),autosave:e("#piperecorder_autosave"),audio_only:e("#piperecorder_audio_only"),mirror:e("#piperecorder_mirror"),environment:e("#piperecorder_environment"),resolution:{all:e('input[name="piperecorder_resolution"]'),"240p":e("#piperecorder_resolution_240p"),"300p":e("#piperecorder_resolution_300p"),"480p":e("#piperecorder_resolution_480p"),"720p":e("#piperecorder_resolution_720p")}}},n.bindFieldAdded(),n.bindFieldLoad(),n.bindFieldEvents(),gform.addFilter("gform_form_editor_can_field_be_added",n.canFieldBeAdded)},n.bindFieldAdded=function(){jQuery(document).bind("gform_field_added",function(e,i,t){"pipe_recorder"===t.type&&(t.pipe={resolution:"300p",width:400,height:300,recording_time:120,bottom_menu:!0,autosave:!0,mirror:!1,audio_only:!1,environment:n.$elem.settingsFields.environment.find("option").eq(0).attr("value")})})},n.bindFieldEvents=function(){n.$elem.settingsFields.resolution.all.on("change",function(e){n.getSelectedField().pipe.resolution=e.target.value}),n.$elem.settingsFields.width.on("change",function(e){n.getSelectedField().pipe.width=e.target.value}),n.$elem.settingsFields.height.on("change",function(e){n.getSelectedField().pipe.height=e.target.value}),n.$elem.settingsFields.recording_time.on("change",function(e){n.getSelectedField().pipe.recording_time=e.target.value}),n.$elem.settingsFields.bottom_menu.on("change",function(e){n.getSelectedField().pipe.bottom_menu=e.target.checked}),n.$elem.settingsFields.autosave.on("change",function(e){n.getSelectedField().pipe.autosave=e.target.checked}),n.$elem.settingsFields.audio_only.on("change",function(e){n.getSelectedField().pipe.audio_only=e.target.checked}),n.$elem.settingsFields.mirror.on("change",function(e){n.getSelectedField().pipe.mirror=e.target.checked}),n.$elem.settingsFields.environment.on("change",function(e){n.getSelectedField().pipe.environment=e.target.value})},n.bindFieldLoad=function(){e(document).bind("gform_load_field_settings",function(e,i){"pipe_recorder"===(i=n.getSelectedField(i)).type&&(n.$elem.settingsFields.resolution[i.pipe.resolution].prop("checked",!0),n.$elem.settingsFields.width.val(i.pipe.width),n.$elem.settingsFields.height.val(i.pipe.height),n.$elem.settingsFields.recording_time.val(i.pipe.recording_time),n.$elem.settingsFields.environment.val(i.pipe.environment),n.$elem.settingsFields.bottom_menu.prop("checked",i.pipe.bottom_menu),n.$elem.settingsFields.autosave.prop("checked",i.pipe.autosave),n.$elem.settingsFields.audio_only.prop("checked",i.pipe.audio_only),n.$elem.settingsFields.mirror.prop("checked",i.pipe.mirror))})},n.canFieldBeAdded=function(e,i){return"pipe_recorder"!==i?e:!(0<GetFieldsByType(["pipe_recorder"]).length&&(alert(gravityformspipe_form_editor_strings.cannot_add),1))},n.getField=function(e){if(form)for(var i=0;i<form.fields.length;i++)if(e==form.fields[i].id)return form.fields[i];return null},n.getSelectedField=function(e){return(e=null==e?GetSelectedField():e).pipe||"pipe_recorder"!==e.type||(e.pipe={resolution:"300p",width:400,height:300,recording_time:120,bottom_menu:!0,autosave:!0,mirror:!1,audio_only:!1,environment:n.$elem.settingsFields.environment.find("option").eq(0).attr("value")}),e},n.init()};jQuery(document).ready(function(){window.GFPipeSettings=new GFPipeSettings});